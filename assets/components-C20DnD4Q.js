var fe=Object.defineProperty;var pe=(s,e,r)=>e in s?fe(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var g=(s,e,r)=>pe(s,typeof e!="symbol"?e+"":e,r);import{j as t,c as C,u as d,a as S,M as we,b as xe,r as i,d as E,F as be,e as ge,f as je,g as X,P as Se,h as Ce,$ as Ne,s as ye,O as Oe,C as M,i as _e,S as Ae,k as Y,l as R,m as Ie,p as I,n as T,R as Te,o as H,T as ve,q as ke}from"./vendor-0eIPEwud.js";const j=({children:s,...e})=>t.jsx("div",{className:`NavbarItem ${e.className?e.className:""}`,children:s}),Re=()=>{let s=localStorage.getItem("theme");return s||(s="dark",Z(s)),s},Z=s=>{localStorage.setItem("theme",s)},$e={theme:Re()},ee=C({name:"theme",initialState:$e,reducers:{switchTheme:s=>{s.theme=s.theme=="dark"?"light":"dark",Z(s.theme)}}}),Qe=ee.reducer,{switchTheme:Be}=ee.actions,se=()=>{const s=d(r=>r.theme.theme),e=S();return t.jsx("button",{className:"BtnToggleTheme IconBtn",onClick:()=>e(Be()),children:s=="light"?t.jsx(we,{size:"24px",style:{background:"#00000000"}}):t.jsx(xe,{size:"24px",style:{background:"#00000000"}})})},Me={sidebarOpen:!1},te=C({name:"sidebarOpen",initialState:Me,reducers:{toggleSidebar:s=>{s.sidebarOpen=!s.sidebarOpen},setIsSidebarOpen:(s,e)=>{s.sidebarOpen=e.payload}}}),Ee=te.reducer,{toggleSidebar:Fe,setIsSidebarOpen:Le}=te.actions,Ts=()=>{const s=d(l=>l.currSubject.subject),[e,r]=i.useState(!1),c=d(l=>l.sidebarOpen.sidebarOpen),a=E("screen and (max-width: 768px)"),f=S();return i.useEffect(()=>{r(()=>!0),setTimeout(()=>r(()=>!1),350)},[c]),t.jsxs("nav",{className:"Navbar",children:[t.jsx(j,{children:t.jsx("button",{className:"BtnHamburger IconBtn",onClick:()=>f(Fe()),disabled:e,children:t.jsx(be,{className:`BtnHamburgerIcon ${c?"active":""}`,style:{backgroundColor:"#00000000"}})})}),t.jsx("div",{className:"SubjectNameContainer",children:!a&&t.jsxs(t.Fragment,{children:[t.jsx(j,{children:t.jsx("span",{style:{textWrap:"nowrap"},children:"Môn học"})}),s&&t.jsxs(t.Fragment,{children:[t.jsx(j,{children:t.jsx(ge,{color:"var(--secondary-text-color)"})}),t.jsx(j,{children:t.jsx("span",{children:s==null?void 0:s.name})})]})]})}),t.jsx(j,{children:t.jsx(se,{})})]})};class re{constructor(e){g(this,"id");g(this,"name");g(this,"subject_id");g(this,"_questions");g(this,"question_per_test");Object.assign(this,e)}get questions(){return this._questions??[]}set questions(e){typeof e=="string"?this._questions=JSON.parse(e):this._questions=e}}const Ue=new URL(""+new URL("sqlite.worker-DMS32ee_.js",import.meta.url).href,import.meta.url),De=new URL(""+new URL("sql-wasm-Bv7gRpUo.wasm",import.meta.url).href,import.meta.url),ze=new URL(""+new URL("../database.sqlite3",import.meta.url).href,import.meta.url).toString();let $=null;const Je=async()=>($||($=await je.createDbWorker([{from:"inline",config:{serverMode:"full",url:ze,requestChunkSize:4096}}],Ue.toString(),De.toString())),$),_=async s=>{const r=await(await Je()).db.query(s);return JSON.stringify(r)},He=async s=>{try{const e=await _(`select *
            from Course 
            where id = ${s}
            limit 1`);return new re(JSON.parse(e)[0])}catch(e){return console.error("Error fetching data:",e),null}},Pe=async()=>{let s=localStorage.getItem("CourseId");if(s){const e=await He(s);if(e)return localStorage.setItem("CourseId",JSON.stringify(e.id)),e}return null},Q=X("currCourse/loadCurrCourse",async(s,{rejectWithValue:e})=>{try{const r=await Pe();return r||e("No course found in local storage")}catch(r){return r instanceof Error?e(r.message):e(String(r))}}),qe={course:null,loading:!1,error:null},ne=C({name:"currCourse",initialState:qe,reducers:{setCurrCourse:(s,e)=>{s.course=e.payload,e.payload?localStorage.setItem("CourseId",JSON.stringify(e.payload.id)):localStorage.removeItem("CourseId")}},extraReducers:s=>{s.addCase(Q.pending,e=>{e.loading=!0,e.error=null}).addCase(Q.fulfilled,(e,r)=>{e.course=r.payload,e.loading=!1}).addCase(Q.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),We=ne.reducer,{setCurrCourse:oe}=ne.actions,Ge=({children:s,...e})=>{const[r,c]=i.useState(!1),a=S(),f=E("screen and (max-width: 768px)");i.useEffect(()=>{e.currCourse?c(e.currCourse.id==e.course.id):c(!1)},[e.currCourse]);const l=()=>{a(oe(e.course)),f&&a(Le(!1))};return t.jsx("li",{className:`SidebarItem ${r?"selected":""}`,children:t.jsxs("button",{onClick:l,children:[t.jsx(Se,{strokeWidth:"70px",className:"icon"})," ",s]})})};class Ke{constructor(e){g(this,"id");g(this,"name");g(this,"semester_id");Object.assign(this,e)}}const Ve=async s=>{try{const e=await _(`select *
            from Subject 
            where id = ${s}
            limit 1`);return new Ke(JSON.parse(e)[0])}catch(e){return console.error("Error fetching data:",e),null}},Xe=async()=>{let s=localStorage.getItem("SubjectId");if(s){const e=await Ve(s);if(e)return localStorage.setItem("SubjectId",e.id),e}return null},B=X("currSubject/loadCurrSubject",async(s,{rejectWithValue:e})=>{try{const r=await Xe();return r||e("No subject found in local storage")}catch(r){return r instanceof Error?e(r.message):e(String(r))}}),Ye={subject:null,loading:!1,error:null},ce=C({name:"currSubject",initialState:Ye,reducers:{setCurrSubject:(s,e)=>{s.subject=e.payload,localStorage.setItem("SubjectId",e.payload.id)}},extraReducers:s=>{s.addCase(B.pending,e=>{e.loading=!0,e.error=null}).addCase(B.fulfilled,(e,r)=>{e.subject=r.payload,e.loading=!1}).addCase(B.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),Ze=ce.reducer,{setCurrSubject:es}=ce.actions,ss=s=>{const e=d(o=>o.currSubject.subject),r=d(o=>o.currCourse.course),[c,a]=i.useState(!1),[f,l]=i.useState([]),u=S();i.useEffect(()=>{a((e==null?void 0:e.id)==s.subject.id)},[e]),i.useEffect(()=>{(async()=>{const x=await _(`select *
        from Course
        where subject_id = ${s.subject.id}`),b=JSON.parse(x).map(p=>new re(p));b&&l(b)})()},[]);const n=()=>{(e==null?void 0:e.id)!=s.subject.id&&u(oe(null)),u(es(s.subject))};return t.jsxs("li",{className:`SidebarGroupItem ${c?"selected":""}`,children:[t.jsx("button",{onClick:n,children:t.jsxs("div",{className:"SidebarGroupItemContainer",children:[t.jsx("span",{children:s.subject.name}),t.jsx(Ce,{className:"icon",style:{minWidth:"20px",minHeight:"20px"}})]})}),t.jsx("div",{className:`SidebarItemsContainer ${c?"show":""}`,children:t.jsx("ul",{children:f.map((o,x)=>t.jsx(Ge,{currCourse:r,course:o,children:o.name},x))})})]})},F=()=>t.jsx("div",{className:"LoadingView",children:t.jsx(Ne,{color:"var(--blue-color-2)",secondaryColor:"#193266"})}),vs=()=>{const s=d(c=>c.sidebarOpen.sidebarOpen),[e,r]=i.useState([]);return i.useEffect(()=>{(async()=>{const a=await _("select * from Subject");r(JSON.parse(a))})()},[]),t.jsx("div",{className:`Sidebar ${s?"":"hide"}`,children:!e||e.length==0?t.jsx(F,{}):t.jsx("ul",{children:e.map((c,a)=>t.jsx(ss,{subject:c},a))})})},ts={activeTest:!1},ae=C({name:"activeTest",initialState:ts,reducers:{toggleActiveTest:s=>{s.activeTest=!s.activeTest}}}),rs=ae.reducer,{toggleActiveTest:ie}=ae.actions,ns=()=>(localStorage.getItem("shuffleAnswerOption")||"true")==="true",os=()=>localStorage.getItem("showAnswerOnChoseOption")==="true",cs={shuffleAnswer:ns(),showAnswerOnChose:os(),questionCount:"15"},le=C({name:"testConfig",initialState:cs,reducers:{toggleShuffleAnswer:s=>{s.shuffleAnswer=!s.shuffleAnswer,localStorage.setItem("shuffleAnswerOption",JSON.stringify(s.shuffleAnswer))},toggleShowAnswerOnChosen:s=>{s.showAnswerOnChose=!s.showAnswerOnChose,localStorage.setItem("showAnswerOnChoseOption",JSON.stringify(s.showAnswerOnChose))},setQuestionCount:(s,e)=>{s.questionCount=e.payload}}}),as=le.reducer,{toggleShuffleAnswer:is,setQuestionCount:P,toggleShowAnswerOnChosen:ls}=le.actions,us=ye(Oe)(()=>({"& .MuiInputBase-input":{borderRadius:4,fontSize:14,paddingTop:10,paddingBottom:10,color:"var(--primary-text-color)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"var(--blue-color-2)"},"& .MuiOutlinedInput-notchedOutline":{height:"100%",border:"2px solid var(--secondary-text-color)"},"& .MuiSvgIcon-root":{color:"var(--secondary-text-color)"}})),ks=()=>{var m,y,L,U;const s=d(w=>w.theme.theme),e=d(w=>w.sidebarOpen.sidebarOpen),r=d(w=>w.currSubject),c=d(w=>w.currCourse),a=d(w=>w.testConfig.shuffleAnswer),f=d(w=>w.testConfig.showAnswerOnChose),[l,u]=i.useState({semester:null,loading:!1}),[n,o]=i.useState([]),[x,b]=i.useState(""),p=S();i.useEffect(()=>{(()=>{const O=[10,15,20,30,40,50,60,100,150],N=[];let D=!1;O.forEach(A=>{var z,J;if(c.course&&A>=((z=c.course)==null?void 0:z.question_per_test)){if(!D){const k=(J=c.course)==null?void 0:J.question_per_test;N.push(t.jsx(R,{value:k,sx:{fontSize:14},children:k},k)),D=!0}return}N.push(t.jsx(R,{value:A,sx:{fontSize:14},children:A},A))}),N.push(t.jsx(R,{value:"all",sx:{fontSize:14},children:"Tất cả"},"all")),o(N)})()},[c.course]),i.useEffect(()=>{const w=async()=>{var N;u({...l,loading:!0});const O=await _(`select *
        from Semester
        where id = ${(N=r.subject)==null?void 0:N.semester_id}`);u({semester:JSON.parse(O)[0],loading:!1})};r.subject&&w()},[r.subject]),i.useEffect(()=>{if(c.course){const w=c.course.question_per_test;b(w.toString()),p(P(w.toString()))}},[c.course]);const h=w=>{const O=w.target.value;b(O),p(P(O))};return t.jsx("div",{className:`CourseInfo ${e?"shrink":""}`,children:l.loading||c.loading||r.loading?t.jsx(F,{}):r.subject&&c.course?t.jsx("table",{children:t.jsxs("tbody",{children:[t.jsx("tr",{className:"CourseInfoTableHeader",children:t.jsx("th",{colSpan:2,children:(m=c.course)==null?void 0:m.name})}),t.jsxs("tr",{className:"CourseInfoTableRow",children:[t.jsx("th",{children:"Học phần"}),t.jsx("td",{children:(y=r.subject)==null?void 0:y.name})]}),t.jsxs("tr",{className:"CourseInfoTableRow",children:[t.jsx("th",{children:"Học kì"}),t.jsx("td",{children:(L=l.semester)==null?void 0:L.name})]}),t.jsxs("tr",{className:"CourseInfoTableRow",children:[t.jsx("th",{children:"Số lượng câu hỏi hiện có"}),t.jsx("td",{children:(U=c.course)==null?void 0:U.questions.length})]}),t.jsx("tr",{className:"CourseInfoTableHeader",children:t.jsx("th",{colSpan:2,children:"Tùy chỉnh"})}),t.jsxs("tr",{className:"CourseInfoTableRow",children:[t.jsx("th",{children:"Đảo đáp án"}),t.jsx("td",{children:t.jsx(M,{sx:{padding:"4px",margin:"-4px",color:"var(--secondary-text-color)"},checked:a,onClick:()=>p(is()),inputProps:{"aria-label":"controlled"}})})]}),t.jsxs("tr",{className:"CourseInfoTableRow",children:[t.jsx("th",{children:"Hiện đáp án ngay sau khi chọn"}),t.jsx("td",{children:t.jsx(M,{sx:{padding:"4px",margin:"-4px",color:"var(--secondary-text-color)"},checked:f,onClick:()=>p(ls()),inputProps:{"aria-label":"controlled"}})})]}),t.jsxs("tr",{className:"CourseInfoTableRow",children:[t.jsx("th",{children:"Số lượng câu hỏi"}),t.jsx("td",{children:t.jsx(_e,{sx:{m:0,minWidth:120},size:"small",children:t.jsx(Ae,{value:x,onChange:h,displayEmpty:!0,inputProps:{"aria-label":"Without label"},input:t.jsx(us,{}),MenuProps:{PaperProps:{sx:{backgroundColor:"var(--background-color)",fontSize:14,color:"var(--primary-text-color)"},"data-theme":s}},children:n})})})]}),t.jsx("tr",{className:"CourseInfoTableRow",children:t.jsx("th",{colSpan:2,children:t.jsxs("button",{className:"BtnDoTest",onClick:()=>p(ie()),children:[t.jsx(Y,{className:"icon",stroke:"#e0e0e0",strokeWidth:3,size:"15px",style:{backgroundColor:"#00000000"}}),"Làm bài"]})})})]})}):t.jsx("span",{children:"Hãy chọn một bài để bắt đầu"})})},ds={questions:[]},ue=C({name:"testQuestion",initialState:ds,reducers:{addTestQuestion:(s,e)=>{s.questions.push(e.payload)},setTestQuestion:(s,e)=>{s.questions=e.payload}}}),hs=ue.reducer,{addTestQuestion:Rs,setTestQuestion:q}=ue.actions,ms={answers:{}},de=C({name:"userAnswer",initialState:ms,reducers:{addUserAnswer:(s,e)=>{s.answers[e.payload.id]?s.answers[e.payload.id].push(Number.parseInt(e.payload.answer)):s.answers[e.payload.id]=[Number.parseInt(e.payload.answer)]},removeUserAnswer:(s,e)=>{s.answers[e.payload.id]&&(s.answers[e.payload.id]=s.answers[e.payload.id].filter(r=>r!=Number.parseInt(e.payload.answer)))},removeAllUserAnswerById:(s,e)=>{s.answers[e.payload]&&(s.answers[e.payload]=[])},resetUserAnwser:s=>{s.answers={}}}}),fs=de.reducer,{addUserAnswer:he,removeUserAnswer:ps,removeAllUserAnswerById:ws,resetUserAnwser:W}=de.actions,G={isTestFininshed:!1,correctAnswers:[],wrongAnswers:[],score:0},me=C({name:"testResult",initialState:G,reducers:{setIsTestFinished:(s,e)=>{s.isTestFininshed=e.payload},addCorrectAnswer:(s,e)=>{s.correctAnswers.push(e.payload)},addWrongAnswer:(s,e)=>{s.wrongAnswers.push(e.payload)},setScore:(s,e)=>{s.score=e.payload},resetTestResut:()=>G}}),xs=me.reducer,{addCorrectAnswer:bs,addWrongAnswer:gs,setIsTestFinished:K,setScore:js,resetTestResut:V}=me.actions,Ss=Ie({reducer:{theme:Qe,sidebarOpen:Ee,currSubject:Ze,currCourse:We,activeTest:rs,testQuestion:hs,userAnswer:fs,testResult:xs,testConfig:as},middleware:s=>s({serializableCheck:!1})}),$s=()=>S();class Cs{constructor(e){g(this,"id");g(this,"_question_direction");g(this,"question_type");g(this,"_answer_option");g(this,"_correct_answer");g(this,"cdr");g(this,"_shuffleable");Object.assign(this,e)}get question_direction(){return this._question_direction??""}set question_direction(e){this._question_direction=e.replace(/\\"/g,'"')}get answer_option(){return this._answer_option??[]}set answer_option(e){typeof e=="string"?this._answer_option=JSON.parse(e):this._answer_option=e}get correct_answer(){return this._correct_answer??[]}set correct_answer(e){if(typeof e=="number")this._correct_answer=[e];else if(typeof e=="string"){const r=JSON.parse(e);typeof r=="number"?this._correct_answer=[r]:this._correct_answer=JSON.parse(e)}else this._correct_answer=e}get shuffleable(){return this._shuffleable??!1}set shuffleable(e){typeof e=="number"?this._shuffleable=e!==0:this._shuffleable=e}}const v={replace(s){const e=s;e.attribs&&e.attribs["data-org"]==="serverAws"&&(e.attribs.src=`https://pczxqazwgbrrqalnwolo.supabase.co/storage/v1/object/public/react-simple-quiz-images/${e.attribs.src}.png`)}},Ns=i.memo(({answerOption:s,question:e,answerOptionBullet:r,selectedValue:c,setSelectedValue:a})=>{const[f,l]=i.useState(""),u=d(h=>h.testResult.isTestFininshed),n=d(h=>h.userAnswer.answers[e.id]),o=d(h=>h.testConfig.showAnswerOnChose),x=S(),b=i.useMemo(()=>{const h=I.sanitize(s.value,{USE_PROFILES:{html:!0}});return T(h,v)},[s.value]);i.useEffect(()=>{if(!u)return;const h=Number.parseInt(s.id);if(!n||n.length==0){e.correct_answer.includes(h)&&l(" unanswer");return}n&&n.includes(h)&&(e.correct_answer.includes(h)||l(" incorrect")),e.correct_answer.includes(h)&&l(" correct")},[u]),i.useEffect(()=>{if(!o||(l(""),!n||n.length==0))return;const h=Number.parseInt(s.id);n&&n.includes(h)&&(e.correct_answer.includes(h)||l(" incorrect")),e.correct_answer.includes(h)&&l(" correct")},[o,n]);const p=h=>{u||(a(h.target.value),x(ws(e.id)),x(he({id:e.id,answer:s.id})))};return t.jsxs("div",{className:`RadioAnswerOption${f}`,children:[t.jsx("span",{className:"AnswerOptionBullet",children:r}),t.jsxs("label",{children:[t.jsx(Te,{name:`question_${e.id}`,checked:c===s.id,value:s.id,onChange:p,sx:{color:"var(--secondary-text-color)",padding:"8px",margin:"-8px"}}),t.jsx("span",{className:"AnswerOptionText",children:b})]})]})}),ys=i.memo(({question:s,index:e})=>{const[r,c]=i.useState("0"),a=i.useMemo(()=>`RadioQuestion${s.correct_answer.includes(0)?" noAnswer":""}`,[s.correct_answer]),f=i.useMemo(()=>{const n=I.sanitize(s.question_direction,{USE_PROFILES:{html:!0}});return T(n,v)},[s.question_direction]),l=n=>{const o=Math.min(Math.max(65,n+65),90);return String.fromCharCode(o)},u=i.useCallback((n,o)=>t.jsx(Ns,{answerOption:n,question:s,answerOptionBullet:l(o),selectedValue:r,setSelectedValue:c},`${s.id}_${n.id}`),[r]);return t.jsxs("div",{className:a,children:[t.jsxs("div",{className:"QuestionContainerDirection",children:[t.jsx("p",{className:"QuestionContainerNumber",children:`Câu ${e+1}: (ID-${s.id})`}),t.jsx("div",{children:f})]}),t.jsx("div",{className:"AnswerOptions",children:s.answer_option.map(u)})]})}),Os=i.memo(({answerOption:s,question:e,answerOptionBullet:r,index:c,selectedValue:a,setSelectedValue:f})=>{const[l,u]=i.useState(""),n=d(m=>m.testResult.isTestFininshed),o=d(m=>m.userAnswer.answers[e.id]),x=d(m=>m.testConfig.showAnswerOnChose),b=S(),p=i.useMemo(()=>{const m=I.sanitize(s.value,{USE_PROFILES:{html:!0}});return T(m,v)},[s.value]);i.useEffect(()=>{if(!n)return;const m=Number.parseInt(s.id);if(!o||o.length==0){e.correct_answer.includes(m)&&u(" unanswer");return}o&&o.includes(m)&&(e.correct_answer.includes(m)||u(" incorrect")),e.correct_answer.includes(m)&&u(" correct")},[n]),i.useEffect(()=>{if(!x||(u(""),!o||o.length==0))return;const m=Number.parseInt(s.id);o&&o.includes(m)&&(e.correct_answer.includes(m)||u(" incorrect")),e.correct_answer.includes(m)&&u(" correct")},[x,o]);const h=()=>{n||(a[c]?b(ps({id:e.id,answer:s.id})):b(he({id:e.id,answer:s.id})),f(a.map((m,y)=>y==c?!m:m)))};return t.jsxs("div",{className:`CheckboxAnswerOption${l}`,children:[t.jsx("span",{className:"AnswerOptionBullet",children:r}),t.jsxs("label",{children:[t.jsx(M,{name:`question_${e.id}_${c}`,checked:a[c],onChange:h,sx:{color:"var(--secondary-text-color)",padding:"8px",margin:"-8px"}}),t.jsx("span",{className:"AnswerOptionText",children:p})]})]})}),_s=i.memo(({question:s,index:e})=>{const[r,c]=i.useState([!1,!1,!1,!1]),a=i.useMemo(()=>`CheckboxQuestion${s.correct_answer.includes(0)?" noAnswer":""}`,[s.correct_answer]),f=i.useMemo(()=>{const n=I.sanitize(s.question_direction,{USE_PROFILES:{html:!0}});return T(n,v)},[s.question_direction]),l=n=>{const o=Math.min(Math.max(65,n+65),90);return String.fromCharCode(o)},u=i.useCallback((n,o)=>t.jsx(Os,{answerOption:n,question:s,answerOptionBullet:l(o),index:o,selectedValue:r,setSelectedValue:c},`${s.id}_${n.id}`),[r]);return t.jsxs("div",{className:a,children:[t.jsxs("div",{className:"QuestionContainerDirection",children:[t.jsx("p",{className:"QuestionContainerNumber",children:`Câu ${e+1}: (ID-${s.id})`}),t.jsx("div",{children:f})]}),t.jsx("div",{className:"AnswerOptions",children:s.answer_option.map(u)})]})}),Qs=()=>{const s=d(n=>n.testQuestion.questions),e=d(n=>n.testResult.isTestFininshed),r=d(n=>n.currCourse.course),{shuffleAnswer:c,questionCount:a}=d(n=>n.testConfig),f=S();i.useEffect(()=>{if(e)return;f(q([])),(async()=>{const o=await _(`
        select * from Question
        where id in (select json_each.value
                      from Course, json_each(questions)
                      where Course.id = ${r==null?void 0:r.id})`),x=JSON.parse(o).map(p=>new Cs(p)),b=u(x);l(b),f(q(b))})()},[e]);const l=n=>{n.forEach(o=>{c&&o.shuffleable&&(o.answer_option=H(o.answer_option))})},u=n=>{const o=H(n);return o.sort((x,b)=>x.cdr-b.cdr),a==="all"||Number.isNaN(Number.parseInt(a))?o:o.slice(0,Number.parseInt(a))};return t.jsx("div",{className:"TestContainer",children:!s||s.length==0?t.jsx(F,{}):s.map((n,o)=>n.question_type==="radio"?t.jsx(ys,{question:n,index:o},n.id):t.jsx(_s,{question:n,index:o},n.id))})},Bs=({setHidePopup:s})=>{const e=d(o=>o.currSubject.subject),r=d(o=>o.testQuestion.questions),c=d(o=>o.testResult),a=S(),f=E("screen and (max-width: 768px)"),l=()=>{!c.isTestFininshed&&!window.confirm("Bài kiểm tra chưa hoàn thành. Bạn có muốn chắc chắn muốn thoát không?")||(a(ie()),a(V()),a(W()))},u=()=>{a(K(!1)),a(V()),a(W())},n=()=>{const x=Ss.getState().userAnswer.answers;let b=0;r.forEach(p=>{const h=JSON.stringify(p.correct_answer.sort()),m=JSON.stringify(x[p.id]&&[...x[p.id]].sort());h===m?(b++,a(bs(p.id))):a(gs(p.id));const y=parseFloat((b/r.length*10).toFixed(2));a(js(y))}),a(K(!0))};return t.jsxs("nav",{className:"Navbar",children:[t.jsx(j,{children:t.jsx("button",{className:"IconBtn",onClick:l,children:t.jsx(ve,{size:"24px"})})}),t.jsxs("div",{className:"TestNavbarContainer",children:[!f&&t.jsx(j,{children:t.jsx("span",{children:e&&(e==null?void 0:e.name)})}),t.jsx("div",{className:"TestNavBarRightSide",children:c.isTestFininshed?t.jsxs(t.Fragment,{children:[t.jsx(j,{children:t.jsx("button",{className:"IconBtn",onClick:u,children:t.jsx(ke,{})})}),t.jsx(j,{children:t.jsxs("button",{className:"ScoreBoxBtn",onClick:()=>s(o=>!o),children:[t.jsxs("div",{children:["Điểm: ",c.score]}),t.jsxs("div",{children:["Kết quả: ",c.correctAnswers.length,"/",r.length]})]})})]}):t.jsx(j,{children:t.jsxs("button",{className:"BtnSubmitTest",onClick:n,children:[t.jsx(Y,{className:"icon",stroke:"#e0e0e0",strokeWidth:3,size:"17px",style:{backgroundColor:"#00000000"}}),"Nộp bài"]})})})]}),t.jsx(j,{children:t.jsx(se,{})})]})},Ms=({hidePopup:s,setHidePopup:e})=>{const{score:r,isTestFininshed:c,correctAnswers:a}=d(n=>n.testResult),f=d(n=>n.testQuestion.questions),[l,u]=i.useState("");return i.useEffect(()=>{e(!c),r<5?u("lowScore"):r<8&&u("mediumScore")},[c]),t.jsx("div",{className:`TestResultPopup ${s?"hide":""}`,children:!s&&t.jsxs("div",{className:`TestResultBox ${l}`,children:[t.jsx("h1",{children:"Kết quả"}),t.jsxs("p",{children:["Điểm của bạn: ",r]}),t.jsxs("p",{children:["Số câu trả lời đúng: ",a.length,"/",f.length]}),t.jsx("button",{onClick:()=>e(!0),children:"Đóng"})]})})};export{ks as C,Ts as N,vs as S,Bs as T,Qs as a,Ms as b,Q as c,B as l,Ss as s,$s as u};
