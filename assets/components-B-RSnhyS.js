var Ye=Object.defineProperty;var Ze=(s,e,r)=>e in s?Ye(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var N=(s,e,r)=>Ze(s,typeof e!="symbol"?e+"":e,r);import{j as t,c as O,u as w,a as v,M as qe,b as es,r as c,d as re,F as fe,e as ss,f as ts,g as ne,P as rs,h as ns,A as os,$ as is,s as me,O as ge,S as we,i as H,C as U,k as as,l as xe,m as cs,p as D,n as $,R as ls,o as us,q as ds,t as Se,D as hs,v as ps,w as fs,x as ms,y as z,T as gs,z as ws,B as xs,E as Ss,G as bs}from"./vendor-B83Yely-.js";const Q=({children:s,...e})=>t.jsx("div",{className:`NavbarItem ${e.className?e.className:""}`,children:s}),js=()=>{let s=localStorage.getItem("theme");return s||(s="dark",be(s)),s},be=s=>{localStorage.setItem("theme",s)},Cs={theme:js()},je=O({name:"theme",initialState:Cs,reducers:{switchTheme:s=>{s.theme=s.theme=="dark"?"light":"dark",be(s.theme)}}}),Ns=je.reducer,{switchTheme:ys}=je.actions,Ce=()=>{const s=w(r=>r.theme.theme),e=v();return t.jsx("button",{className:"BtnToggleTheme IconBtn",onClick:()=>e(ys()),children:s=="light"?t.jsx(qe,{size:"24px",style:{background:"#00000000"}}):t.jsx(es,{size:"24px",style:{background:"#00000000"}})})},Is={sidebarOpen:!1},Ne=O({name:"sidebarOpen",initialState:Is,reducers:{toggleSidebar:s=>{s.sidebarOpen=!s.sidebarOpen},setIsSidebarOpen:(s,e)=>{s.sidebarOpen=e.payload}}}),_s=Ne.reducer,{toggleSidebar:ye,setIsSidebarOpen:vs}=Ne.actions,At=()=>{const s=w(p=>p.currSubject.subject),[e,r]=c.useState(!1),n=w(p=>p.sidebarOpen.sidebarOpen),h=re("screen and (max-width: 768px)"),d=v();return c.useEffect(()=>{r(()=>!0),setTimeout(()=>r(()=>!1),350)},[n]),t.jsxs("nav",{className:"Navbar",children:[t.jsx(Q,{children:t.jsx("button",{className:"BtnHamburger IconBtn",onClick:()=>d(ye()),disabled:e,children:t.jsx(fe,{className:`BtnHamburgerIcon ${n?"active":""}`,style:{backgroundColor:"#00000000"}})})}),t.jsx("div",{className:"SubjectNameContainer",children:!h&&t.jsxs(t.Fragment,{children:[t.jsx(Q,{children:t.jsx("span",{style:{textWrap:"nowrap"},children:"Môn học"})}),s&&t.jsxs(t.Fragment,{children:[t.jsx(Q,{children:t.jsx(ss,{color:"var(--secondary-text-color)"})}),t.jsx(Q,{children:t.jsx("span",{children:s==null?void 0:s.name})})]})]})}),t.jsx(Q,{children:t.jsx(Ce,{})})]})};class Ie{constructor(e){N(this,"id");N(this,"name");N(this,"subject_id");N(this,"_questions");N(this,"question_per_test");Object.assign(this,e)}get questions(){return this._questions??[]}set questions(e){typeof e=="string"?this._questions=JSON.parse(e):this._questions=e}}const As=new URL(""+new URL("sqlite.worker-DMS32ee_.js",import.meta.url).href,import.meta.url),Qs=new URL(""+new URL("sql-wasm-Bv7gRpUo.wasm",import.meta.url).href,import.meta.url),Os=new URL(""+new URL("../database.sqlite3",import.meta.url).href,import.meta.url).toString();let X=null;const Ts=async()=>(X||(X=await ts.createDbWorker([{from:"inline",config:{serverMode:"full",url:Os,requestChunkSize:4096}}],As.toString(),Qs.toString())),X),T=async s=>{const r=await(await Ts()).db.query(s);return JSON.stringify(r)},Rs=async s=>{try{const e=await T(`select *
            from Course 
            where id = ${s}
            limit 1`);return new Ie(JSON.parse(e)[0])}catch(e){return console.error("Error fetching data:",e),null}},ks=async()=>{let s=localStorage.getItem("CourseId");if(s){const e=await Rs(s);if(e)return localStorage.setItem("CourseId",JSON.stringify(e.id)),e}return null},Y=ne("currCourse/loadCurrCourse",async(s,{rejectWithValue:e})=>{try{const r=await ks();return r||e("No course found in local storage")}catch(r){return r instanceof Error?e(r.message):e(String(r))}}),Es={course:null,loading:!1,error:null},_e=O({name:"currCourse",initialState:Es,reducers:{setCurrCourse:(s,e)=>{s.course=e.payload,e.payload?localStorage.setItem("CourseId",JSON.stringify(e.payload.id)):localStorage.removeItem("CourseId")}},extraReducers:s=>{s.addCase(Y.pending,e=>{e.loading=!0,e.error=null}).addCase(Y.fulfilled,(e,r)=>{e.course=r.payload,e.loading=!1}).addCase(Y.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),Ds=_e.reducer,{setCurrCourse:ve}=_e.actions,$s=({children:s,...e})=>{const[r,n]=c.useState(!1),h=v(),d=re("screen and (max-width: 768px)");c.useEffect(()=>{e.currCourse?n(e.currCourse.id==e.course.id):n(!1)},[e.currCourse]);const p=()=>{h(ve(e.course)),d&&h(vs(!1))};return t.jsx("li",{className:`SidebarItem ${r?"selected":""}`,children:t.jsxs("button",{onClick:p,children:[t.jsx(rs,{strokeWidth:"70px",className:"icon"})," ",s]})})};class Ms{constructor(e){N(this,"id");N(this,"name");N(this,"semester_id");Object.assign(this,e)}}const Bs=async s=>{try{const e=await T(`select *
            from Subject 
            where id = ${s}
            limit 1`);return new Ms(JSON.parse(e)[0])}catch(e){return console.error("Error fetching data:",e),null}},Fs=async()=>{let s=localStorage.getItem("SubjectId");if(s){const e=await Bs(s);if(e)return localStorage.setItem("SubjectId",e.id),e}return null},Z=ne("currSubject/loadCurrSubject",async(s,{rejectWithValue:e})=>{try{const r=await Fs();return r||e("No subject found in local storage")}catch(r){return r instanceof Error?e(r.message):e(String(r))}}),Ls={subject:null,loading:!1,error:null},Ae=O({name:"currSubject",initialState:Ls,reducers:{setCurrSubject:(s,e)=>{s.subject=e.payload,localStorage.setItem("SubjectId",e.payload.id)}},extraReducers:s=>{s.addCase(Z.pending,e=>{e.loading=!0,e.error=null}).addCase(Z.fulfilled,(e,r)=>{e.subject=r.payload,e.loading=!1}).addCase(Z.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),Ps=Ae.reducer,{setCurrSubject:Us}=Ae.actions,Hs=({subject:s})=>{const e=w(a=>a.currSubject.subject),r=w(a=>a.currCourse.course),[n,h]=c.useState(!1),[d,p]=c.useState(!1),[l,m]=c.useState([]),f=`SidebarGroupItem ${n?"selected":""} ${d?"expanded":""}`,i=v();c.useEffect(()=>{h((e==null?void 0:e.id)===s.id),p((e==null?void 0:e.id)===s.id)},[e]),c.useEffect(()=>{(async()=>{const o=await T(`select *
        from Course
        where subject_id = ${s.id}`),g=JSON.parse(o).map(b=>new Ie(b));g&&m(g)})()},[]);const u=()=>{(e==null?void 0:e.id)!==s.id&&i(ve(null)),i(Us(s)),p(a=>!a)};return t.jsxs("li",{className:f,children:[t.jsx("button",{onClick:u,children:t.jsxs("div",{className:"SidebarGroupItemContainer",children:[t.jsx("span",{children:s.name}),t.jsx(ns,{className:"icon",style:{minWidth:"20px",minHeight:"20px"}})]})}),t.jsx(os,{height:d?"auto":0,duration:300,className:"SidebarItemsContainer",children:t.jsx("ul",{children:l.map((a,o)=>t.jsx($s,{currCourse:r,course:a,children:a.name},o))})})]})};class zs{constructor(e){N(this,"id");N(this,"name");Object.assign(this,e)}}const Js=async s=>{try{const e=await T(`select *
            from Semester 
            where id = ${s}
            limit 1`);return new zs(JSON.parse(e)[0])}catch(e){return console.error("Error fetching data:",e),null}},Ws=async()=>{let s=localStorage.getItem("SemesterId");if(s){const e=await Js(s);if(e)return localStorage.setItem("SemesterId",e.id.toString()),e}return null},q=ne("currSemester/loadCurrSemester",async(s,{rejectWithValue:e})=>{try{const r=await Ws();return r||e("No semester found in local storage")}catch(r){return r instanceof Error?e(r.message):e(String(r))}}),Gs={semester:null,loading:!1,error:null},Qe=O({name:"currSemester",initialState:Gs,reducers:{setCurrSemester:(s,e)=>{s.semester=e.payload,e.payload?localStorage.setItem("SemesterId",e.payload.id.toString()):localStorage.removeItem("SemesterId")}},extraReducers:s=>{s.addCase(q.pending,e=>{e.loading=!0,e.error=null}).addCase(q.fulfilled,(e,r)=>{e.loading=!1,e.semester=r.payload}).addCase(q.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),Ks=Qe.reducer,{setCurrSemester:ie}=Qe.actions,W=()=>t.jsx("div",{className:"LoadingView",children:t.jsx(is,{color:"var(--blue-color-2)",secondaryColor:"#193266"})}),Vs=me(ge)(()=>({"& .MuiInputBase-input":{borderRadius:4,color:"var(--primary-text-color)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"var(--blue-color-2)"},"& .MuiOutlinedInput-notchedOutline":{height:"100%",border:"2px solid var(--secondary-text-color)"},"& .MuiSvgIcon-root":{color:"var(--secondary-text-color)"}})),Qt=()=>{const s=w(i=>i.sidebarOpen.sidebarOpen),e=w(i=>i.currSemester.semester),[r,n]=c.useState([]),[h,d]=c.useState([]),[p,l]=c.useState([]),m=v();c.useEffect(()=>{(async()=>{const u=await T("select * from Subject");n(JSON.parse(u));const a=await T("select * from Semester");d(JSON.parse(a))})()},[]),c.useEffect(()=>{const i=e?r.filter(u=>u.semester_id===e.id):r;l(i)},[e,r]);const f=i=>{const u=Number(i.target.value);if(u===-1)m(ie(null));else{const a=h.find(o=>o.id===u);a&&m(ie(a))}};return t.jsxs("div",{className:`Sidebar ${s?"":"hide"}`,children:[!r||!h?t.jsx(W,{}):t.jsxs(t.Fragment,{children:[t.jsxs(we,{name:"semester",value:e&&h.length>0?e.id:-1,onChange:f,input:t.jsx(Vs,{}),MenuProps:{sx:{transform:"translateX(-8px)"}},children:[t.jsx(H,{value:-1,children:"Tất cả"}),h.map(i=>t.jsx(H,{value:i.id,children:i.name},i.id))]}),!p||p.length===0?t.jsx("div",{className:"SidebarEmpty",children:t.jsx("p",{children:"Không có môn học nào trong học kỳ này"})}):t.jsx("ul",{children:p.map(i=>t.jsx(Hs,{subject:i},i.id))})]}),t.jsx("div",{className:"SidebarOverlay",onClick:()=>m(ye())})]})};class G{constructor(e){N(this,"id");N(this,"_question_direction");N(this,"question_type");N(this,"_answer_option");N(this,"_correct_answer");N(this,"input_correct_answer");N(this,"cdr");N(this,"group_id");N(this,"_shuffleable");Object.assign(this,e)}get question_direction(){return this._question_direction??""}set question_direction(e){this._question_direction=e.replace(/\\"/g,'"')}get answer_option(){return this._answer_option??[]}set answer_option(e){typeof e=="string"?this._answer_option=JSON.parse(e):this._answer_option=e}get correct_answer(){return this._correct_answer??[]}set correct_answer(e){if(typeof e=="number")this._correct_answer=[e];else if(typeof e=="string"){const r=JSON.parse(e);typeof r=="number"?this._correct_answer=[r]:this._correct_answer=JSON.parse(e)}else this._correct_answer=e}get shuffleable(){return this._shuffleable??!1}set shuffleable(e){typeof e=="number"?this._shuffleable=e!==0:this._shuffleable=e}}const Xs={activeTest:!1},Oe=O({name:"activeTest",initialState:Xs,reducers:{toggleActiveTest:s=>{s.activeTest=!s.activeTest}}}),Ys=Oe.reducer,{toggleActiveTest:Te}=Oe.actions,Zs=()=>(localStorage.getItem("shuffleAnswerOption")||"true")==="true",qs=()=>localStorage.getItem("showAnswerOnChoseOption")==="true",et=()=>localStorage.getItem("showQuestionByPageOption")==="true",st={shuffleAnswer:Zs(),showAnswerOnChosen:qs(),showQuestionByPage:et(),questionCount:"15"},Re=O({name:"testConfig",initialState:st,reducers:{toggleShuffleAnswer:s=>{s.shuffleAnswer=!s.shuffleAnswer,localStorage.setItem("shuffleAnswerOption",JSON.stringify(s.shuffleAnswer))},toggleShowAnswerOnChosen:s=>{s.showAnswerOnChosen=!s.showAnswerOnChosen,localStorage.setItem("showAnswerOnChoseOption",JSON.stringify(s.showAnswerOnChosen))},toggleShowQuestionByPage:s=>{s.showQuestionByPage=!s.showQuestionByPage,localStorage.setItem("showQuestionByPageOption",JSON.stringify(s.showQuestionByPage))},setQuestionCount:(s,e)=>{s.questionCount=e.payload}}}),tt=Re.reducer,{toggleShuffleAnswer:rt,setQuestionCount:ae,toggleShowAnswerOnChosen:nt,toggleShowQuestionByPage:ot}=Re.actions,M={replace(s){const e=s;e.attribs&&e.attribs["data-org"]==="serverAws"&&(e.attribs.src=`https://pczxqazwgbrrqalnwolo.supabase.co/storage/v1/object/public/react-simple-quiz-images/${e.attribs.src}.png`)}},te=s=>{const e=[],r={};return s.forEach(n=>{n.question_type==="grouping"&&n.group_id||n.question_type==="group-input"&&n.group_id||n.question_type==="drag_drop"&&n.group_id?r[n.group_id]=[...r[n.group_id]||[],n]:e.push(n)}),{filteredQuestions:e,groupedQuestions:r}},it=me(ge)(()=>({"& .MuiInputBase-input":{borderRadius:4,fontSize:14,paddingTop:10,paddingBottom:10,color:"var(--primary-text-color)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"var(--blue-color-2)"},"& .MuiOutlinedInput-notchedOutline":{height:"100%",border:"2px solid var(--secondary-text-color)"},"& .MuiSvgIcon-root":{color:"var(--secondary-text-color)"}})),Ot=()=>{var y,x,_;const s=w(j=>j.theme.theme),e=w(j=>j.sidebarOpen.sidebarOpen),r=w(j=>j.currSubject),n=w(j=>j.currCourse),{shuffleAnswer:h,showAnswerOnChosen:d,showQuestionByPage:p}=w(j=>j.testConfig),[l,m]=c.useState({semester:null,loading:!1}),[f,i]=c.useState([]),[u,a]=c.useState(""),[o,g]=c.useState({value:0,loading:!1}),[b,I]=c.useState({value:0,loading:!1}),C=v();c.useEffect(()=>{(()=>{if(!n.course)return;const A=[10,15,20,30,40,50,60,80,100,150],R=[],B=n.course.question_per_test;A.includes(B)||(A.push(B),A.sort()),A.forEach(k=>{var P;!n.course||k>=((P=n.course)==null?void 0:P.questions.length)||R.push(t.jsx(H,{value:k,sx:{fontSize:14},children:k},k))}),R.push(t.jsx(H,{value:"all",sx:{fontSize:14},children:"Tất cả"},"all")),i(R)})()},[n.course]),c.useEffect(()=>{const j=async()=>{var R;m({...l,loading:!0});const A=await T(`select *
        from Semester
        where id = ${(R=r.subject)==null?void 0:R.semester_id}`);m({semester:JSON.parse(A)[0],loading:!1})};r.subject&&j()},[r.subject]),c.useEffect(()=>{if(n.course){const A=n.course.question_per_test;a(A.toString()),C(ae(A.toString()))}(async()=>{if(!n.course)return;const A=await T(`
        SELECT *
        FROM Question
        WHERE id IN (${n.course.questions.join(",")})
      `),R=JSON.parse(A).map(E=>new G(E)),{filteredQuestions:B,groupedQuestions:k}=te(R),P=B.length;let oe=B.filter(E=>!E.correct_answer.some(F=>F<=0)&&(E.question_type==="radio"||E.question_type==="checkbox")).length;for(const E in k)if(k.hasOwnProperty(E)){let F=!0;k[E].forEach(V=>{V.question_type!=="group-input"?V.correct_answer.some(Xe=>Xe<=0)&&(F=!1):V.input_correct_answer||(F=!1)}),F&&oe++}g({value:oe,loading:!1}),I({value:P,loading:!1})})()},[n.course]);const S=j=>{const A=j.target.value;a(A),C(ae(A))};return l.loading||n.loading||r.loading||o.loading||b.loading?t.jsx("div",{className:`CourseInfo ${e?"shrink":""}`,children:t.jsx(W,{})}):!r.subject||!n.course?t.jsx("div",{className:`CourseInfo ${e?"shrink":""}`,children:t.jsx("span",{children:"Hãy chọn một bài để bắt đầu"})}):t.jsx("div",{className:`CourseInfo ${e?"shrink":""}`,children:t.jsx("div",{className:"CourseInfoTable",children:t.jsx("table",{children:t.jsxs("tbody",{children:[t.jsx("tr",{className:"CourseInfoTableHeader",children:t.jsx("th",{colSpan:2,children:(y=n.course)==null?void 0:y.name})}),t.jsxs("tr",{className:"CourseInfoTableRow",children:[t.jsx("th",{children:"Học phần"}),t.jsx("td",{children:(x=r.subject)==null?void 0:x.name})]}),t.jsxs("tr",{className:"CourseInfoTableRow",children:[t.jsx("th",{children:"Học kì"}),t.jsx("td",{children:(_=l.semester)==null?void 0:_.name})]}),t.jsxs("tr",{className:"CourseInfoTableRow",children:[t.jsx("th",{children:"Số lượng câu hỏi hiện có"}),t.jsx("td",{children:b.value})]}),t.jsxs("tr",{className:"CourseInfoTableRow",children:[t.jsx("th",{children:"Số lượng câu hỏi đã có đáp án"}),t.jsx("td",{children:o.value})]}),t.jsx("tr",{className:"CourseInfoTableHeader",children:t.jsx("th",{colSpan:2,children:"Tùy chỉnh"})}),t.jsxs("tr",{className:"CourseInfoTableRow",children:[t.jsx("th",{children:"Đảo đáp án"}),t.jsx("td",{children:t.jsx(U,{sx:{padding:"4px",margin:"-4px",color:"var(--secondary-text-color)"},checked:h,onClick:()=>C(rt()),inputProps:{"aria-label":"controlled"}})})]}),t.jsxs("tr",{className:"CourseInfoTableRow",children:[t.jsx("th",{children:"Hiện đáp án ngay sau khi chọn"}),t.jsx("td",{children:t.jsx(U,{sx:{padding:"4px",margin:"-4px",color:"var(--secondary-text-color)"},checked:d,onClick:()=>C(nt()),inputProps:{"aria-label":"controlled"}})})]}),t.jsxs("tr",{className:"CourseInfoTableRow",children:[t.jsx("th",{children:"Hiện từng câu hỏi theo trang"}),t.jsx("td",{children:t.jsx(U,{sx:{padding:"4px",margin:"-4px",color:"var(--secondary-text-color)"},checked:p,onClick:()=>C(ot()),inputProps:{"aria-label":"controlled"}})})]}),t.jsxs("tr",{className:"CourseInfoTableRow",children:[t.jsx("th",{children:"Số lượng câu hỏi"}),t.jsx("td",{children:t.jsx(as,{sx:{m:0,minWidth:120},size:"small",children:t.jsx(we,{value:u,onChange:S,displayEmpty:!0,inputProps:{"aria-label":"Without label"},input:t.jsx(it,{}),MenuProps:{PaperProps:{sx:{backgroundColor:"var(--background-color)",fontSize:14,color:"var(--primary-text-color)"},"data-theme":s}},children:f})})})]}),t.jsx("tr",{className:"CourseInfoTableRow",children:t.jsx("th",{colSpan:2,children:t.jsxs("button",{className:"BtnDoTest",onClick:()=>C(Te()),children:[t.jsx(xe,{className:"icon",stroke:"#e0e0e0",strokeWidth:3,size:"15px",style:{backgroundColor:"#00000000"}}),"Làm bài"]})})})]})})})})},at={questions:[],filteredQuestions:[],groupedQuestions:{}},ke=O({name:"testQuestion",initialState:at,reducers:{addTestQuestion:(s,e)=>{s.questions.push(e.payload);const{filteredQuestions:r,groupedQuestions:n}=te(s.questions);s.filteredQuestions=r,s.groupedQuestions=n},setTestQuestion:(s,e)=>{s.questions=e.payload;const{filteredQuestions:r,groupedQuestions:n}=te(s.questions);s.filteredQuestions=r,s.groupedQuestions=n}}}),ct=ke.reducer,{addTestQuestion:Tt,setTestQuestion:J}=ke.actions,lt={answers:{},input_answers:{}},Ee=O({name:"userAnswer",initialState:lt,reducers:{addUserAnswer:(s,e)=>{s.answers[e.payload.id]?s.answers[e.payload.id].push(Number.parseInt(e.payload.answer)):s.answers[e.payload.id]=[Number.parseInt(e.payload.answer)]},removeUserAnswer:(s,e)=>{s.answers[e.payload.id]&&(s.answers[e.payload.id]=s.answers[e.payload.id].filter(r=>r!=Number.parseInt(e.payload.answer)))},updateUserAnswer:(s,e)=>{const r=e.payload.answers.map(Number).filter(n=>!isNaN(n));s.answers[e.payload.id]=r},setInputAnswer:(s,e)=>{s.input_answers[e.payload.id]=e.payload.answer},removeInputAnswer:(s,e)=>{s.input_answers[e.payload]&&delete s.input_answers[e.payload]},removeAllUserAnswerById:(s,e)=>{s.answers[e.payload]&&(s.answers[e.payload]=[]),s.input_answers[e.payload]&&delete s.input_answers[e.payload]},resetUserAnwser:s=>{s.answers={},s.input_answers={}}}}),ut=Ee.reducer,{addUserAnswer:De,removeUserAnswer:dt,updateUserAnswer:ht,setInputAnswer:pt,removeInputAnswer:Rt,removeAllUserAnswerById:ft,resetUserAnwser:ce}=Ee.actions,le={isTestFininshed:!1,correctAnswers:[],wrongAnswers:[],score:0},$e=O({name:"testResult",initialState:le,reducers:{setIsTestFinished:(s,e)=>{s.isTestFininshed=e.payload},addCorrectAnswer:(s,e)=>{s.correctAnswers.push(e.payload)},addWrongAnswer:(s,e)=>{s.wrongAnswers.push(e.payload)},setScore:(s,e)=>{s.score=e.payload},resetTestResut:()=>le}}),mt=$e.reducer,{addCorrectAnswer:ue,addWrongAnswer:de,setIsTestFinished:he,setScore:gt,resetTestResut:pe}=$e.actions,Me=O({name:"testNavigation",initialState:{currentQuestionNumber:1},reducers:{setCurrentQuestion:(s,e)=>{s.currentQuestionNumber=e.payload}}}),wt=Me.reducer,{setCurrentQuestion:L}=Me.actions,xt=cs({reducer:{theme:Ns,sidebarOpen:_s,currSubject:Ps,currCourse:Ds,currSemester:Ks,activeTest:Ys,testQuestion:ct,userAnswer:ut,testResult:mt,testConfig:tt,testNavigation:wt},middleware:s=>s({serializableCheck:!1})}),kt=()=>v(),Be=c.memo(({answerOption:s,question:e,answerOptionBullet:r,selectedValue:n,setSelectedValue:h})=>{const[d,p]=c.useState(""),l=w(o=>o.testResult.isTestFininshed),m=w(o=>o.userAnswer.answers[e.id]),f=w(o=>o.testConfig.showAnswerOnChosen),i=v(),u=c.useMemo(()=>{const o=D.sanitize(s.value,{USE_PROFILES:{html:!0}});return $(o,M)},[s.value]);c.useEffect(()=>{if(!l)return;const o=Number.parseInt(s.id);if(!m||m.length==0){e.correct_answer.includes(o)&&p(" unanswer");return}m&&m.includes(o)&&(e.correct_answer.includes(o)||p(" incorrect")),e.correct_answer.includes(o)&&p(" correct")},[l]),c.useEffect(()=>{if(!f||(p(""),!m||m.length==0))return;const o=Number.parseInt(s.id);m&&m.includes(o)&&(e.correct_answer.includes(o)||p(" incorrect")),e.correct_answer.includes(o)&&p(" correct")},[f,m]);const a=o=>{l||(h(o.target.value),i(ft(e.id)),i(De({id:e.id,answer:s.id})))};return t.jsxs("div",{className:`RadioAnswerOption${d}`,children:[t.jsx("span",{className:"AnswerOptionBullet",children:r}),t.jsxs("label",{children:[t.jsx(ls,{name:`question_${e.id}`,checked:n===s.id,value:s.id,onChange:a,sx:{color:"var(--secondary-text-color)",padding:"8px",margin:"-8px"}}),t.jsx("span",{className:"AnswerOptionText",children:u})]})]})});Be.displayName="RadioAnswerOption";const St=({number:s,id:e,directionText:r,haveAnswer:n,children:h})=>{const d=c.useMemo(()=>{const p=D.sanitize(r,{USE_PROFILES:{html:!0}});return $(p,M)},[r]);return t.jsxs("div",{className:"QuestionContainerDirection",children:[t.jsxs("div",{className:"QuestionContainerHeader",children:[t.jsx("span",{className:"QuestionContainerNumber",children:`Câu ${s}: (ID-${e})`}),!n&&t.jsx("span",{className:"QuestionNoAnswerMessage",children:"Chưa có đáp án"})]}),t.jsx("div",{className:"QuestionContainerContent",children:d}),h&&t.jsx("div",{className:"QuestionContainerAdditional",children:h})]})},K=c.memo(St),Fe=c.forwardRef(({question:s,number:e,...r},n)=>{const[h,d]=c.useState("0"),p=c.useMemo(()=>s.correct_answer.some(i=>i>0&&i<=s.answer_option.length),[s.correct_answer]),l=p?"RadioQuestion":"RadioQuestion noAnswer",m=i=>{const u=Math.min(Math.max(65,i+65),90);return String.fromCharCode(u)},f=c.useCallback((i,u)=>t.jsx(Be,{answerOption:i,question:s,answerOptionBullet:m(u),selectedValue:h,setSelectedValue:d},`${s.id}_${i.id}`),[h]);return t.jsxs("div",{className:l,...r,ref:n,children:[t.jsx(K,{number:e,id:s.id,directionText:s.question_direction,haveAnswer:p}),t.jsx("div",{className:"AnswerOptions",children:s.answer_option.map(f)})]})});Fe.displayName="RadioQuestion";const Le=c.memo(Fe),Pe=c.memo(({answerOption:s,question:e,answerOptionBullet:r,index:n,selectedValue:h,setSelectedValue:d})=>{const[p,l]=c.useState(""),m=w(g=>g.testResult.isTestFininshed),f=w(g=>g.userAnswer.answers[e.id]),i=w(g=>g.testConfig.showAnswerOnChosen),u=v(),a=c.useMemo(()=>{const g=D.sanitize(s.value,{USE_PROFILES:{html:!0}});return $(g,M)},[s.value]);c.useEffect(()=>{if(!m)return;const g=Number.parseInt(s.id);if(!f||f.length==0){e.correct_answer.includes(g)&&l(" unanswer");return}f&&f.includes(g)&&(e.correct_answer.includes(g)||l(" incorrect")),e.correct_answer.includes(g)&&l(" correct")},[m]),c.useEffect(()=>{if(!i||(l(""),!f||f.length==0))return;const g=Number.parseInt(s.id);f&&f.includes(g)&&(e.correct_answer.includes(g)||l(" incorrect")),e.correct_answer.includes(g)&&l(" correct")},[i,f]);const o=()=>{m||(h[n]?u(dt({id:e.id,answer:s.id})):u(De({id:e.id,answer:s.id})),d(h.map((g,b)=>b==n?!g:g)))};return t.jsxs("div",{className:`CheckboxAnswerOption${p}`,children:[t.jsx("span",{className:"AnswerOptionBullet",children:r}),t.jsxs("label",{children:[t.jsx(U,{name:`question_${e.id}_${n}`,checked:h[n],onChange:o,sx:{color:"var(--secondary-text-color)",padding:"8px",margin:"-8px"}}),t.jsx("span",{className:"AnswerOptionText",children:a})]})]})});Pe.displayName="CheckboxAnswerOption";const Ue=c.forwardRef(({question:s,number:e,...r},n)=>{const[h,d]=c.useState([!1,!1,!1,!1]),p=c.useMemo(()=>s.correct_answer.some(i=>i>0&&i<=s.correct_answer.length),[s.correct_answer]),l=p?"CheckboxQuestion":"CheckboxQuestion noAnswer",m=i=>{const u=Math.min(Math.max(65,i+65),90);return String.fromCharCode(u)},f=c.useCallback((i,u)=>t.jsx(Pe,{answerOption:i,question:s,answerOptionBullet:m(u),index:u,selectedValue:h,setSelectedValue:d},`${s.id}_${i.id}`),[h]);return t.jsxs("div",{className:l,...r,ref:n,children:[t.jsx(K,{number:e,id:s.id,directionText:s.question_direction,haveAnswer:p}),t.jsx("div",{className:"AnswerOptions",children:s.answer_option.map(f)})]})});Ue.displayName="CheckboxQuestion";const He=c.memo(Ue),ze=c.memo(({answerOption:s,question:e})=>{const r=c.useMemo(()=>{const m=D.sanitize(s.value,{USE_PROFILES:{html:!0}});return $(m,M)},[s.value]),{attributes:n,listeners:h,setNodeRef:d,transform:p}=us({id:`answer-option-${e.id}-${s.id}`,data:{answerOptionId:s.id,questionId:e.id}}),l={transform:ds.Translate.toString(p)};return t.jsx("span",{id:`question_${e.id}_${s.id}`,ref:d,...h,...n,style:l,className:"DragDropAnswerOption",children:t.jsx("span",{className:"AnswerOptionText",children:r})})});ze.displayName="DragDropAnswerOption";const bt=({question:s,index:e,selectedAnswers:r,children:n})=>{const{setNodeRef:h,isOver:d}=Se({id:s.id}),[p,l]=c.useState(""),m=w(o=>o.testResult.isTestFininshed),f=w(o=>o.userAnswer.answers[s.id]),i=w(o=>o.testConfig.showAnswerOnChosen),u=v(),a=c.useMemo(()=>{const o=D.sanitize(s.question_direction,{USE_PROFILES:{html:!0}});return $(o,M)},[s.question_direction]);return c.useEffect(()=>{if(!m)return;if(!f||f.length==0){s.correct_answer.length>0&&l(" unanswer");return}const o=JSON.stringify(s.correct_answer.sort()),g=JSON.stringify(f&&[...f].sort());l(o===g?" correct":" incorrect")},[m]),c.useEffect(()=>{if(!i||(l(""),!f||f.length==0))return;const o=JSON.stringify(s.correct_answer.sort()),g=JSON.stringify(f&&[...f].sort());l(o===g?" correct":" incorrect")},[i,f]),c.useEffect(()=>{m||f===void 0&&r.length===0||u(ht({id:s.id,answers:r}))},[r]),t.jsxs("div",{className:`DragDropInputQuestion${p}`,children:[t.jsx("span",{className:"DragDropInputTextDirection",children:e?`${e}) ${a}`:a}),t.jsxs("span",{className:"DragDropInputContainer",children:[t.jsx("div",{className:"DragDropInputDroppable",ref:h,children:n}),t.jsx("p",{className:"DragDropInputMessage",style:d||n!=null&&n.length?{display:"none"}:{},children:"Kéo và thẻ các đáp án vào đây"})]})]})},Je=c.forwardRef(({dragQuestion:s,inputQuestions:e,number:r,...n},h)=>{const[d,p]=c.useState({[s.id]:s.answer_option.map(a=>Number(a.id))}),l=s.question_type==="grouping",m=c.useMemo(()=>{let a=!0;return e.forEach(o=>{o.correct_answer.some(g=>g>0)||(a=!1)}),a},[e]),f=m?"DragDropQuestion":"DragDropQuestion noAnswer",i=a=>{const{active:o,over:g}=a;if(!g||!o.data.current)return;const b=Number(o.data.current.answerOptionId),I=g.id;p(C=>{const S={...C};S[I]||(S[I]=[]);let y=-1;for(const x in S)if(S.hasOwnProperty(x)&&S[x].includes(b)){y=Number(x);break}if(y!==-1)if(!l&&I!==s.id&&S[I]&&S[I].length>=1){const x=S[I][0];S[I]=[b],S[y]=S[y].filter(_=>_!==b),S[y]=[...S[y],x]}else S[y]=S[y].filter(x=>x!==b),S[I]=[...S[I],b];return S})},u=c.useCallback(a=>t.jsx(ze,{answerOption:a,question:s},`${s.id}_${a.id}`),[s]);return t.jsx("div",{className:f,...n,ref:h,children:t.jsxs(hs,{onDragEnd:i,modifiers:[ps],children:[t.jsx(K,{number:r,id:s.id,directionText:s.question_direction,haveAnswer:m,children:t.jsx(jt,{questionId:s.id,children:s.answer_option.filter(a=>d[s.id].includes(Number(a.id))).map(u)})}),t.jsx("div",{className:`DragDropInputQuestions ${l?"card":"row"}`,children:e.map((a,o)=>t.jsx(bt,{question:a,index:l?o+1:void 0,selectedAnswers:d[a.id]||[],children:d[a.id]&&s.answer_option.filter(g=>d[a.id].includes(Number(g.id))).map(u)},a.id))})]})})}),jt=({children:s,questionId:e})=>{const{setNodeRef:r}=Se({id:e});return t.jsx("div",{className:"DragDropAnswerOptions",ref:r,children:s})};Je.displayName="DragDropQuestion";const We=c.memo(Je),Ct=({question:s,index:e})=>{const[r,n]=c.useState(""),[h,d]=c.useState(""),p=w(o=>o.testResult.isTestFininshed),l=w(o=>o.userAnswer.input_answers[s.id]),m=w(o=>o.testConfig.showAnswerOnChosen),f=v(),i=c.useMemo(()=>{const o=D.sanitize(s.question_direction,{USE_PROFILES:{html:!0}});return $(o,M)},[s.question_direction]);c.useEffect(()=>{if(p){if(!l){n(" unanswer");return}(s==null?void 0:s.input_correct_answer)===l?n(" correct"):n(" incorrect")}},[p]),c.useEffect(()=>{m&&(n(""),l&&((s==null?void 0:s.input_correct_answer)===l?n(" correct"):n(" incorrect")))},[m,l]);const u=c.useCallback(fs.debounce(o=>{f(pt({id:s.id,answer:o}))},350),[f,s.id]),a=o=>{if(p)return;const g=o.target.value;d(g),u(g)};return t.jsxs("div",{className:`GroupInputInputQuestion${r}`,children:[t.jsx("label",{htmlFor:`input-question-${s.id}`,className:"GroupInputInputTextDirection",children:`${e}) ${i}`}),t.jsx("span",{className:"GroupInputInputContainer",children:t.jsx("input",{type:"text",id:`input-question-${s.id}`,value:h,onInput:a,spellCheck:!1})})]})},Ge=c.forwardRef(({topicQuestion:s,inputQuestions:e,number:r,...n},h)=>{const d=c.useMemo(()=>!e.some(l=>l.input_correct_answer===null),[e]),p=d?"GroupInputQuestion":"GroupInputQuestion noAnswer";return t.jsxs("div",{className:p,...n,ref:h,children:[t.jsx(K,{number:r,id:s.id,directionText:s.question_direction,haveAnswer:d}),t.jsx("div",{className:"GroupInputInputQuestions",children:e.map((l,m)=>t.jsx(Ct,{question:l,index:m+1},l.id))})]})});Ge.displayName="GroupInputQuestion";const Ke=c.memo(Ge),Nt=({children:s,sectionRefs:e,rootSelector:r,offset:n,as:h,...d})=>{const p=ms({sectionRefs:e,rootSelector:r,offset:n}),l=w(i=>i.testNavigation.currentQuestionNumber),m=v();c.useEffect(()=>{p.currentElementIndexInViewport===-1||p.currentElementIndexInViewport+1===l||m(L(p.currentElementIndexInViewport+1))},[p]);const f=h||"div";return t.jsx(f,{...d,children:s})},Et=()=>{const s=w(a=>a.testQuestion.filteredQuestions),e=w(a=>a.testQuestion.groupedQuestions),r=w(a=>a.testResult.isTestFininshed),n=w(a=>a.currCourse.course),{shuffleAnswer:h,questionCount:d}=w(a=>a.testConfig),p=v(),l=c.useRef([]),[m,f]=c.useState(-60);c.useEffect(()=>{window.innerHeight!==0&&f(-60-window.innerHeight/4)},[window.innerHeight]),c.useMemo(()=>{l.current.length!==s.length&&(l.current=Array(s.length).fill(null).map((a,o)=>l.current[o]||c.createRef()))},[s.length]),c.useEffect(()=>{if(r)return;p(J([])),(async()=>{const o=await T(`
        select * from Question
        where id in (select json_each.value
                      from Course, json_each(questions)
                      where Course.id = ${n==null?void 0:n.id})`),g=JSON.parse(o).map(I=>new G(I)),b=u(g);i(b),p(J(b))})()},[r]);const i=a=>{a.forEach(o=>{h&&o.shuffleable&&(o.answer_option=z(o.answer_option))})},u=a=>{const o=z(a);return o.sort((g,b)=>g.cdr-b.cdr),d==="all"||Number.isNaN(Number.parseInt(d))?o:o.slice(0,Number.parseInt(d))};return!s||s.length==0||!l.current?t.jsx("div",{className:"TestContainer",children:t.jsx(W,{})}):t.jsx(Nt,{as:"div",className:"TestContainer",sectionRefs:l.current,offset:m,children:s.map((a,o)=>a.question_type==="radio"?t.jsx(Le,{ref:l.current[o],question:a,id:`questionNumber_${o+1}`,number:o+1},a.id):a.question_type==="drag_drop"||a.question_type==="grouping"?t.jsx(We,{ref:l.current[o],dragQuestion:a,inputQuestions:e[a.id]||[],id:`questionNumber_${o+1}`,number:o+1},a.id):a.question_type==="group-input"?t.jsx(Ke,{ref:l.current[o],topicQuestion:a,inputQuestions:e[a.id]||[],id:`questionNumber_${o+1}`,number:o+1},a.id):t.jsx(He,{ref:l.current[o],question:a,id:`questionNumber_${o+1}`,number:o+1},a.id))})},Dt=({setHidePopup:s})=>{const e=w(u=>u.currSubject.subject),r=w(u=>u.testQuestion.filteredQuestions),n=w(u=>u.testQuestion.groupedQuestions),h=w(u=>u.testResult),d=v(),p=re("screen and (max-width: 768px)"),l=()=>{!h.isTestFininshed&&!window.confirm("Bài kiểm tra chưa hoàn thành. Bạn có muốn chắc chắn muốn thoát không?")||(d(Te()),d(pe()),d(ce()))},m=()=>{d(he(!1)),d(pe()),d(ce())},f=(u,a)=>Array.isArray(u)&&Array.isArray(a)?JSON.stringify(u.sort())===JSON.stringify(a.sort()):typeof u=="string"&&typeof a=="string"?u.toLowerCase()===a.toLowerCase():!1,i=()=>{const u=xt.getState(),a=u.userAnswer.answers,o=u.userAnswer.input_answers;let g=0;r.forEach(b=>{if(n[b.id]){let C=!0;n[b.id].forEach(S=>{if(S.question_type!=="group-input"){const y=a[S.id]||[];f(y,S.correct_answer)||(C=!1)}else{const y=o[S.id]||null;!y||!S.input_correct_answer?C=!1:f(y,S.input_correct_answer)||(C=!1)}}),C?(g++,d(ue(b.id))):d(de(b.id))}else{let C=!0;if(b.question_type!=="group-input"){const S=a[b.id]||[];f(S,b.correct_answer)||(C=!1)}else{const S=o[b.id]||null;!S||!b.input_correct_answer?C=!1:f(S,b.input_correct_answer)||(C=!1)}C?(g++,d(ue(b.id))):d(de(b.id))}const I=parseFloat((g/r.length*10).toFixed(2));d(gt(I))}),d(he(!0))};return t.jsxs("nav",{className:"Navbar",children:[t.jsx(Q,{children:t.jsx("button",{className:"IconBtn",onClick:l,children:t.jsx(gs,{size:"24px"})})}),t.jsxs("div",{className:"TestNavbarContainer",children:[!p&&t.jsx(Q,{children:t.jsx("span",{children:e&&(e==null?void 0:e.name)})}),t.jsx("div",{className:"TestNavBarRightSide",children:h.isTestFininshed?t.jsxs(t.Fragment,{children:[t.jsx(Q,{children:t.jsx("button",{className:"IconBtn",onClick:m,children:t.jsx(ws,{})})}),t.jsx(Q,{children:t.jsxs("button",{className:"ScoreBoxBtn",onClick:()=>s(u=>!u),children:[t.jsxs("div",{children:["Điểm: ",h.score]}),t.jsxs("div",{children:["Kết quả: ",h.correctAnswers.length,"/",r.length]})]})})]}):t.jsx(Q,{children:t.jsxs("button",{className:"BtnSubmitTest",onClick:i,children:[t.jsx(xe,{className:"icon",stroke:"#e0e0e0",strokeWidth:3,size:"17px",style:{backgroundColor:"#00000000"}}),"Nộp bài"]})})})]}),t.jsx(Q,{children:t.jsx(Ce,{})})]})},$t=({hidePopup:s,setHidePopup:e})=>{const{score:r,isTestFininshed:n,correctAnswers:h}=w(m=>m.testResult),d=w(m=>m.testQuestion.filteredQuestions),[p,l]=c.useState("");return c.useEffect(()=>{e(!n),r<5?l("lowScore"):r<8?l("mediumScore"):l("")},[n]),t.jsx("div",{className:`TestResultPopup ${s?"hide":""}`,children:!s&&t.jsxs("div",{className:`TestResultBox ${p}`,children:[t.jsx("h1",{children:"Kết quả"}),t.jsxs("p",{children:["Điểm của bạn: ",r]}),t.jsxs("p",{children:["Số câu trả lời đúng: ",h.length,"/",d.length]}),t.jsx("button",{onClick:()=>e(!0),children:"Đóng"})]})})},Mt=()=>{const s=w(i=>i.testQuestion.filteredQuestions),e=w(i=>i.testQuestion.groupedQuestions),r=w(i=>i.testResult.isTestFininshed),n=w(i=>i.currCourse.course),h=w(i=>i.testNavigation.currentQuestionNumber),{shuffleAnswer:d,questionCount:p}=w(i=>i.testConfig),l=v();c.useEffect(()=>{if(r||l(L(1)),r)return;l(J([])),(async()=>{const u=await T(`
        select * from Question
        where id in (select json_each.value
                      from Course, json_each(questions)
                      where Course.id = ${n==null?void 0:n.id})`),a=JSON.parse(u).map(g=>new G(g)),o=f(a);m(o),l(J(o))})()},[r]);const m=i=>{i.forEach(u=>{d&&u.shuffleable&&(u.answer_option=z(u.answer_option))})},f=i=>{const u=z(i);return u.sort((a,o)=>a.cdr-o.cdr),p==="all"||Number.isNaN(Number.parseInt(p))?u:u.slice(0,Number.parseInt(p))};return!s||s.length==0?t.jsx("div",{className:"TestContainer",children:t.jsx(W,{})}):t.jsx("div",{className:"TestContainer TestContainerPaginated",children:s.map((i,u)=>i.question_type==="radio"?t.jsx("div",{className:"RadioQuestionWrapper",style:h!==u+1?{display:"none"}:{},children:t.jsx(Le,{question:i,number:u+1})},i.id):i.question_type==="drag_drop"?t.jsx("div",{className:"DragDropQuestionWrapper",style:h!==u+1?{display:"none"}:{},children:t.jsx(We,{dragQuestion:i,inputQuestions:e[i.id]||[],number:u+1})},i.id):i.question_type==="group-input"?t.jsx("div",{className:"GroupInputQuestionWrapper",style:h!==u+1?{display:"none"}:{},children:t.jsx(Ke,{topicQuestion:i,inputQuestions:e[i.id]||[],number:u+1})},i.id):t.jsx("div",{className:"CheckboxQuestionWrapper",style:h!==u+1?{display:"none"}:{},children:t.jsx(He,{question:i,number:u+1})},i.id))})},yt=({currentIndex:s,questionNumbers:e})=>{const n=c.useRef(null),h=c.useRef(null),[d,p]=c.useState(0),[l,m]=c.useState(0);return c.useEffect(()=>{if(h.current&&n.current){const f=n.current.clientWidth,{defaultWidth:i,offsetFromCenter:u}=It(h.current,f);p(i),m(u)}},[]),c.useEffect(()=>{if(!(!d||!l)&&h.current&&n.current){const f=(s!==-1?s:1)-1+2,i=h.current.querySelectorAll(".QuestionNumberIndicatorItem"),u=i[f];i.forEach((a,o)=>{a.classList.remove("neighbour","current"),o===f&&a.classList.add("current"),Math.abs(o-f)===1&&a.classList.add("neighbour")}),u&&(h.current.style.transform=`translateX(${-(d*f)+l}px)`)}},[s,d,l]),t.jsx("div",{className:"QuestionNumberIndicatorContainer",ref:n,children:t.jsx("div",{className:"QuestionNumberIndicator",ref:h,children:t.jsx(Ve,{questionNumbers:e,fakeItemCount:2})})})},Ve=c.memo(({questionNumbers:s,fakeItemCount:e})=>{const r=n=>Array(e).fill(0).map((h,d)=>t.jsx("div",{className:"QuestionNumberIndicatorItem fake",children:h},d+n));return t.jsxs(t.Fragment,{children:[r(-e),s.map(n=>t.jsx("div",{className:"QuestionNumberIndicatorItem",children:n},n)),r(s.length+1)]})});Ve.displayName="QuestionNumberIndicatorList";const It=(s,e)=>{const r=document.createElement("div");r.className="QuestionNumberIndicatorItem",r.textContent="0",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.transition="none",s.appendChild(r);const n=ee(r);r.classList.add("neighbour");const h=ee(r);r.classList.remove("neighbour"),r.classList.add("current");const d=ee(r),p=h-n,l=(e-d)/2-p;return s.removeChild(r),{defaultWidth:n,neighborWidth:h,currentWidth:d,offsetFromCenter:l}},ee=s=>{const e=s.offsetWidth,r=getComputedStyle(s);return e+parseInt(r.marginLeft)+parseInt(r.marginRight)},Bt=()=>{const s=w(x=>x.theme.theme),e=w(x=>x.userAnswer.answers),r=w(x=>x.testQuestion.filteredQuestions),{correctAnswers:n,wrongAnswers:h}=w(x=>x.testResult),{questionCount:d,showQuestionByPage:p}=w(x=>x.testConfig),l=w(x=>x.testNavigation.currentQuestionNumber),m=v(),f=d!=="all"?parseInt(d):r.length,i=c.useMemo(()=>[...Array(f).keys()].map(x=>x+1),[f]),[u,a]=c.useState(null),o=!!u,g=x=>{a(x.currentTarget)},b=()=>{a(null)},I=x=>{let _="QuestionListMenuItem";try{const j=r[x-1];j instanceof G&&(!e||e&&!e[j==null?void 0:j.id]?_+=" unanswer":n.includes(j==null?void 0:j.id)?_+=" correct":h.includes(j==null?void 0:j.id)&&(_+=" incorrect"))}catch{console.log(`Question number ${x} does not exists`)}return x===l&&(_+=" selected"),_},C=x=>{p?m(L(x)):se(x),b()},S=x=>{const _=Math.min(l+1,f);l>=f-1&&x.currentTarget.blur(),p?m(L(_)):se(_)},y=x=>{l<=2&&x.currentTarget.blur();const _=Math.max(l-1,1);p?m(L(_)):se(_)};return!r||r.length==0?t.jsx("div",{className:"Footer"}):t.jsxs("div",{className:"Footer",children:[t.jsx("button",{id:"QuestionListShowBtn","aria-controls":o?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":o?"true":void 0,onClick:g,children:t.jsx(fe,{className:"icon",size:16})}),t.jsx(xs,{anchorOrigin:{vertical:"top",horizontal:-10},transformOrigin:{vertical:"bottom",horizontal:"left"},anchorEl:u,open:o,onClose:b,disableRestoreFocus:!1,closeAfterTransition:!0,slotProps:{paper:{sx:{backgroundColor:"var(--background-color)",color:"var(--primary-text-color)",transform:"translateY(-10px) !important"}}},"data-theme":s,children:t.jsx("div",{className:"QuestionListMenuContent",children:i.map(x=>t.jsx("button",{className:I(x),onClick:()=>C(x),children:x},x))})}),t.jsxs("button",{className:"PreviousQuestionBtn",onClick:y,disabled:l<=1,children:[t.jsx("span",{className:"PreviousQuestionBtnText",children:"Câu hỏi trước đó"}),t.jsx("span",{className:"PreviousQuestionBtnIcon",children:t.jsx(Ss,{className:"icon"})})]}),t.jsx(yt,{currentIndex:l,questionNumbers:i}),t.jsxs("button",{className:"NextQuestionBtn",onClick:S,disabled:l===f,children:[t.jsx("span",{className:"NextQuestionBtnText",children:"Câu hỏi tiếp theo"}),t.jsx("span",{className:"NextQuestionBtnIcon",children:t.jsx(bs,{className:"icon"})})]})]})},se=(s,e=0)=>{const r=document.getElementById(`questionNumber_${s}`);if(!r)return;const d=r.offsetTop-60-20-e;window.scroll({top:d,behavior:"smooth"})};export{Ot as C,At as N,Qt as S,Dt as T,Mt as a,Et as b,$t as c,Bt as d,Y as e,q as f,Z as l,xt as s,kt as u};
